X <- model.matrix(~ age + sex + ph.ecog, data = lung)
N <- nrow(X)
M <- ncol(X)
real_data = list(y = Y, event = delta, x = X, N = N, M = M)
real_data
summary(myvb)
myvb <- survregVB(formula = Surv(time, status == 2) ~ age + sex + factor(ph.ecog),
data = lung, alpha_0 = 501, omega_0 = 500, mu_0 = c(5,0,0,0,0), v_0 = 1)
myvb <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) + factor(ph.ecog),
data = lung, alpha_0 = 501, omega_0 = 500, mu_0 = c(5,0,0,0,0), v_0 = 1)
ncol(X)
myvb <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) + factor(ph.ecog),
data = lung, alpha_0 = 501, omega_0 = 500, mu_0 = c(5,0,0,0,0,0), v_0 = 1)
summary(myvb)
mysurvreg <- survreg(formula = Surv(time, status == 2) ~ age + factor(sex) + factor(ph.ecog),
data = lung, dist="loglogistic")
summary(mysurvreg)
source("~/.active-rstudio-document", echo=TRUE)
?na.action
Y <- lung$time
n <- nrow(lung)
delta <- lung$status - 1
# Convert categorical variables to factors
lung$sex <- factor(lung$sex)
lung$ph.ecog <- factor(lung$ph.ecog)
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + sex + ph.ecog, data = lung, na.omit)
lung <- na.omit(lung)
Y <- lung$time
n <- nrow(lung)
delta <- lung$status - 1
# Convert categorical variables to factors
lung$sex <- factor(lung$sex)
lung$ph.ecog <- factor(lung$ph.ecog)
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + sex + ph.ecog, data = lung, na.omit)
N <- nrow(X)
M <- ncol(X)
real_data = list(y = Y, event = delta, x = X, N = N, M = M)
source("~/.active-rstudio-document", echo=TRUE)
?lung
confint(res1)
confint(mysurvreg)
scale_se <- summary(mysurvreg)$table[nrow(summary(mysurvreg)$table), 2]  # Last row contains scale SE
scale_se
scale_se <- summary(res1)$table[nrow(summary(res1)$table), 2]  # Last row contains scale SE
scale_se
scale_se <- summary(mysurvreg)$table[nrow(summary(mysurvreg)$table), 2]  # Last row contains scale SE
scale_estimate
scale_estimate <- summary(mysurvreg)$scale
# Compute 95% confidence interval for scale
scale_lower <- scale_estimate - 1.96 * scale_se
scale_upper <- scale_estimate + 1.96 * scale_se
# Print confidence interval
cat("95% CI for scale: (", scale_lower, ",", scale_upper, ")\n")
summary(survreg)
summary(mysurvreg)
confint(mysurvreg)
scale_estimate <- summary(mysurvreg)$scale
scale_estimate
scale_se <- summary(mysurvreg)$table[nrow(summary(mysurvreg)$table), 2]  # Last row contains scale SE
scale_se
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/Downloads/MCMC_AFT.R", echo=TRUE)
print(time)
source("~/.active-rstudio-document", echo=TRUE)
print(time)
summary(res1)
source("~/.active-rstudio-document", echo=TRUE)
source("~/survregVB/R/lung_cancer.R", echo=TRUE)
print(time)
source("~/survregVB/R/lung_survival.R", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
?lung_cancer
?lung_cancer
View(lung_cancer)
1825
log(1825)
log(1825/2)
summary(res1)
summary(res)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
summary(myres)
?lung_cancer
View(lung_cancer)
source("~/survregVB/R/lung_cancer.R", echo=TRUE)
print(time)
res <- survreg(formula = Surv(time, status) ~ age + Stage + gender +
factor(smoking), data = lung_cancer, dist = "loglogistic")
summary(res)
knitr::opts_chunk$set(echo = TRUE)
fit <- survregVB(formula = Surv(time, event) ~ age + Stage + gender + factor(smoking),
data = lung_cancer, alpha_0 = 11, omega_0 = 10,
mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
fit <- survregVB(formula = Surv(time, status) ~ age + Stage + gender + factor(smoking),
data = lung_cancer, alpha_0 = 11, omega_0 = 10,
mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
load_all()
load_all()
install.packages('survregVB')
install.packages("survregVB")
knitr::opts_chunk$set(echo = TRUE)
library(survregVB)
library(survival)
?lung
ls()
class(lung)
rm(lung)
library(survregVB)
library(survival)
fit <- survregVB(formula = Surv(time, status) ~ age + Stage + gender + factor(smoking),
data = lung_cancer, alpha_0 = 11, omega_0 = 10,
mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
library(survregVB)
library(survival)
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
library(survregVB)
library(survival)
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
library(survregVB)
load_all()
library(devtools)
load_all()
library(survregVB)
library(survival)
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
fit
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
fit
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
fit
summary(fit)
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
fit
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
print(fit)
?rhDNase
summary(fit)
?survregVB
help("survregVB")
?simulation_nofrailty
?dnase
fit2 <- survregVB(
formula = Surv(T.15, delta.15) ~ x1 + x2,
data = simulation_frailty,
alpha_0 = 3,
omega_0 = 2,
mu_0 = c(0, 0, 0),
v_0 = 0.1,
lambda_0 = 3,
eta_0 = 2,
cluster = cluster,
max_iteration = 100,
threshold = 0.01
)
print(fit2)
summary(fit2)
?lung
library(survregVB)
library(survival)
?dnase
help("survregVB")
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev,
data = dnase,
alpha_0 = 501,
omega_0 = 500,
mu_0 = c(4.4, 0.25, 0.04),
v_0 = 1,
max_iteration = 10000,
threshold = 0.0005,
na.action = na.omit
)
print(fit)
summary(fit)
res
summary(res)$confint
sum <- summary(res)
confint(survreg)
?lung
View(lung)
lung <- na.omit(lung)
Y <- lung$time
n <- nrow(lung)
delta <- lung$status - 1
# Convert categorical variables to factors
lung$sex <- factor(lung$sex)
lung$ph.ecog <- factor(lung$ph.ecog)
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + sex + ph.ecog, data = lung)
ncol(X)
View(lung)
?lung_cancer
?lung
X <- model.matrix(~ age + sex + ph.ecog + ph.karno + pat.karno + meal.cal, data = lung)
ncol(X)
source("~/survregVB/inst/lung_survival.R", echo=TRUE)
res <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) + ph.karno + pat.karno + meal.cal, data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(5, 0, 0, 0, 0, 0, 0, 0, 0), v_0 = 1)
View(res)
summary(res)
res <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) + ph.karno + pat.karno + meal.cal, data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(0, 0, 0, 0, 0, 0, 0, 0, 0), v_0 = 1)
res <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) + ph.karno + pat.karno + meal.cal, data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(0, 0, 0, 0, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
res <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) + ph.karno + pat.karno + meal.cal, data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(0, 0, 0, 0, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01, max_iteration = 100000)
log(1296/2)
log(824/2)
log(824)
res <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) + ph.karno + pat.karno + meal.cal, data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(6.71, 0, 0, 0, 0, 0, 0, 0, 0), v_0 = 1)
res <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) + ph.karno + pat.karno + meal.cal, data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(6.7, 0, 0, 0, 0, 0, 0, 0, 0), v_0 = 1)
res
survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) , data = lung,
alpha_0 = 501, omega_0 = 500, mu_0 = c(6.7, 0, 0, 0, 0, 0,
), v_0 = 1)
survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) , data = lung,
alpha_0 = 501, omega_0 = 500, mu_0 = c(6.7, 0, 0, 0, 0, 0), v_0 = 1)
survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog) , data = lung,
alpha_0 = 501, omega_0 = 500, mu_0 = c(6.7, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
fit2 <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog), data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(6.7, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
print(fit2)
source("~/survregVB/inst/lung_survival.R", echo=TRUE)
vb <- survregVB(formula = Surv(time, status == 2) ~ age + factor(sex) +
factor(ph.ecog), data = lung, alpha_0 = 501, omega_0 = 500,
mu_0 = c(6.7, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
source("~/survregVB/inst/lung_survival.R", echo=TRUE)
print(M3, pars = c("beta", "sigma"), digits = 3, probs = c(0.025, 0.975))
source("~/survregVB/inst/lung_survival.R", echo=TRUE)
print(M3, pars = c("beta", "sigma"), digits = 3, probs = c(0.025, 0.975))
time
summary(vb)
time2
summary(surv)
confint(surv)
scale_se <- summary(mysurvreg)$table[nrow(summary(mysurvreg)$table), 2]  # Last row contains scale SE
scale_se
scale_estimate <- summary(mysurvreg)$scale
scale_se <- summary(surv)$table[nrow(summary(surv)$table), 2]  # Last row contains scale SE
scale_se
scale_estimate <- summary(surv)$scale
# Compute 95% confidence interval for scale
scale_lower <- scale_estimate - 1.96 * scale_se
scale_upper <- scale_estimate + 1.96 * scale_se
# Print confidence interval
cat("95% CI for scale: (", scale_lower, ",", scale_upper, ")\n")
survregVB(formula = Surv(time, status) ~ factor(gender) + Stage + factor(smoking), alpha_0 = 11, omega_0 = 10, mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
survregVB(formula = Surv(time, status) ~ factor(gender) + Stage + factor(smoking), data = lung_cancer, alpha_0 = 11, omega_0 = 10, mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
survregVB(formula = Surv(time, status) ~ age + Stage + factor(gender) + factor(smoking), data = lung_cancer, alpha_0 = 11, omega_0 = 10, mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
Y <- lung_cancer$time
n <- nrow(lung_cancer)
delta <- lung_cancer$status
# Convert categorical variables to factors
lung_cancer$gender <- factor(lung_cancer$gender)
lung_cancer$Stage <- factor(lung_cancer$Stage)
lung_cancer$smoking <- factor(lung_cancer$smoking)
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + Stage + gender + smoking, data = lung_cancer)
N <- nrow(X)
M <- ncol(X)
real_data = list(y = Y, event = delta, x = X, N = N, M = M)
real_data
ncol(X)
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
source("~/survregVB/inst/lung_survival.R", echo=TRUE)
X <- model.matrix(~ age + Stage + gender + smoking, data = lung_cancer)
View(X)
View(lung_cancer)
Y <- lung_cancer$time
n <- nrow(lung_cancer)
delta <- lung_cancer$status
# Convert categorical variables to factors
lung_cancer$gender <- factor(lung_cancer$gender)
lung_cancer$Stage <- factor(lung_cancer$Stage)
lung_cancer$smoking <- factor(lung_cancer$smoking)
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + Stage + gender + smoking, data = lung_cancer)
N <- nrow(X)
M <- ncol(X)
real_data = list(y = Y, event = delta, x = X, N = N, M = M)
real_data
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
library(devtools)
library(survregVB)
?lung_cancer
load_all()
?lung_cancer
Y <- lung_cancer$time
n <- nrow(lung_cancer)
delta <- lung_cancer$status
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + Stage + gender + smoking, data = lung_cancer)
N <- nrow(X)
M <- ncol(X)
real_data = list(y = Y, event = delta, x = X, N = N, M = M)
Y <- lung_cancer$time
n <- nrow(lung_cancer)
delta <- lung_cancer$status
# Create the model matrix (dummy encoding for Stage)
X <- model.matrix(~ age + Stage + gender + factor(smoking), data = lung_cancer)
N <- nrow(X)
M <- ncol(X)
real_data = list(y = Y, event = delta, x = X, N = N, M = M)
real_data
length(Y)
length(delta)
nrow(X)
N
M
ncol(X
)
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
source("~/survregVB/inst/lung_cancer.R", echo=TRUE)
start <- Sys.time()
vb1 <- survregVB(formula = Surv(time, status) ~ age + Stage + gender + factor(smoking),
data = lung_cancer, alpha_0 = 11, omega_0 = 10, mu_0 = c(6.8, 0, 0, 0, 0, 0),
v_0 = 1, threshold = 0.01)
end <- Sys.time()
time2 <- end - start
surv1 <- survreg(formula = Surv(time, stats) ~ age + Stage + gender + factor(smoking),
data = lung_cancer, dist = "loglogistic")
surv1 <- survreg(formula = Surv(time, status) ~ age + Stage + gender + factor(smoking),
data = lung_cancer, dist = "loglogistic")
time
print(M3, pars = c("beta", "sigma"), digits = 3, probs = c(0.025, 0.975))
summary(vb1)
time2
summary(srv1)
summary(surv1)
scale_se <- summary(surv1)$table[nrow(summary(surv1)$table), 2]  # Last row contains scale SE
scale_estimate <- summary(surv1)$scale
# Compute 95% confidence interval for scale
scale_lower <- scale_estimate - 1.96 * scale_se
scale_upper <- scale_estimate + 1.96 * scale_se
# Print confidence interval
cat("95% CI for scale: (", scale_lower, ",", scale_upper, ")\n")
scale_se
confint(surv1)
?survreg
?survregVB
use_r('survregVB')
load_all()
survregVB
?survregVB
res
?res
myres <- survregVB(formula = Surv(time, status) ~ age + Stage + gender + factor(smoking), data = lung_cancer, alpha_0 = 11, omega_0 = 10, mu_0 = c(6.8, 0, 0, 0, 0, 0), v_0 = 1, threshold = 0.01)
print(myres)
summary(myres)
?dnase
R CMD check --as-cran
devtools::check(cran = TRUE)
devtools::check(cran = TRUE)
library(devtools)
pkgbuild::check_build_tools(debug = TRUE)
check(cran = TRUE)
check(cran = TRUE)
pkgbuild::check_build_tools(debug = TRUE)
check(cran = TRUE)
R CMD SHLIB foo.c
check(cran = TRUE)
library(devtools)
check(cran = TRUE)
result <- survregVB(Surv(time, infect) ~ trt + fev, dnase,
501, 500, c(4.4, 0.25, 0.04), 1,
max_iteration = 100, threshold = 0.0005
)
library(survival)
result <- survregVB(Surv(time, infect) ~ trt + fev, dnase,
501, 500, c(4.4, 0.25, 0.04), 1,
max_iteration = 100, threshold = 0.0005
)
summary(result)
summary(result)$posteriors
result2 <- suppressWarnings(
survregVB(Surv(time, infect) ~ trt + fev, dnase,
501, 500, c(4.4, 0.25, 0.04), 1,
max_iteration = 8, threshold = 0.0005
)
)
summary(result2)$posteriors
summary(result2)$posteriors
capture_output(print(summary(result, digits = 4))
)
capture_output()
print(summary(result, digits = 4)))
print(summary(result, digits = 4))
capture_output(print(summary(result, digits = 4)))
library(devtools)
capture_output(print(summary(result, digits = 4)))
capture_output(print(summary(result, digits = 4)))
capture.output(print(summary(result, digits = 4)))
check(cran = TRUE)
?survreg
fit <- survregVB(
formula = Surv(time, infect) ~ trt + fev, data = dnase,
alpha_0 = 501, omega_0 = 500, mu_0 = c(4.4, 0.25, 0.04), v_0 = 1,
max_iteration = 10000, threshold = 0.0005, na.action = na.omit
)
print(fit)
print(fit) summary(fit)
source("~/.active-rstudio-document", echo=TRUE)
fit <- survregVB(fit_frailty <- survregVB(
formula = Surv(T.15, delta.15) ~ x1 + x2, data = simulation_frailty,
alpha_0 = 3, omega_0 = 2, mu_0 = c(0, 0, 0), v_0 = 0.1,
lambda_0 = 3, eta_0 = 2, cluster = cluster,
max_iteration = 100, threshold = 0.01
)
summary(fit2)
summary(fitfit_frailty <- survregVB(
formula = Surv(T.15, delta.15) ~ x1 + x2, data = simulation_frailty,
alpha_0 = 3, omega_0 = 2, mu_0 = c(0, 0, 0), v_0 = 0.1,
lambda_0 = 3, eta_0 = 2, cluster = cluster,
max_iteration = 100, threshold = 0.01
)
)
fit_frailty <- survregVB(
formula = Surv(T.15, delta.15) ~ x1 + x2, data = simulation_frailty,
alpha_0 = 3, omega_0 = 2, mu_0 = c(0, 0, 0), v_0 = 0.1,
lambda_0 = 3, eta_0 = 2, cluster = cluster,
max_iteration = 100, threshold = 0.01
)
summary(fit_frailty)
